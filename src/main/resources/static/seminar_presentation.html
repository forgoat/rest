<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>讨论课</title>

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="bootstrap/js/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="bootstrap/js/bootstrap.js"></script>
    <!-- Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="css/base.css">

</head>

<body >
<div class="container">
    <div class="div-auto1" >
        <h4 class="text-center">用例分析</h4>
        <div class="text-right"><button class="btn btn-danger " >结 束</button></div>
    </div>
    <div class="row" >
        <div class="col-xs-3" id="myView">
            <ul class="nav nav-pills nav-stacked text-center">
                <li role="presentation" class="myL" id="L0"><a href="#"  >NO.1 1-4</a></li>
                <li role="presentation" class="myL" id="L1"><a href="#" >NO.2 1-2</a></li>
                <li role="presentation" class="myL" id="L2"><a href="#" >NO.3 1-3</a></li>
                <li role="presentation" class="myL" id="L3"><a href="#" >NO.4 1-1</a></li>
                <li role="presentation" class="myL" id="L4"><a href="#" >NO.5 1-7</a></li>
                <li role="presentation" class="myL" id="L5"><a href="#" >NO.6 1-8</a></li>
            </ul>
        </div>
        <div id="isbody">
            <!--div控制模块-->
            <div class="well col-xs-9 display-none mydiv" id="div0" >
                <!--展示环节-->
                <div class="well">
                    <div >
                        <label >展示打分:</label>
                    </div>
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="0~5分">
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button">
                            <span class="glyphicon glyphicon-ok"></span>
                        </button>
                    </span>
                    </div><!-- /input-group -->
                </div>

                <div class="well">
                    <div >
                        <label >提问打分:</label>
                    </div>
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="0~5分">
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button">
                            <span class="glyphicon glyphicon-ok"></span>
                        </button>
                    </span>
                    </div><!-- /input-group --><br>
                    <div class="row margin-3p" id="questionlist">
                        <ul class="nav nav-pills  text-center">
                            <li role="presentation" ><a href="#"> 1-8 </a></li>
                            <li role="presentation" ><a href="#">1-5 </a></li>
                            <li role="presentation" ><a href="#">1-2 </a></li>
                            <li role="presentation" ><a href="#">1-3 </a></li>
                            <li role="presentation" class="active"><a href="#">1-1 </a></li>
                        </ul>
                    </div>

                    <div class="row">
                        <button class="btn btn-primary btn-block nextQuestion disabled">下个提问</button>
                    </div>
                </div>
                <div class="row">
                    <button class="btn btn-primary btn-block mynextGroup disabled">下组展示</button>
                </div>

            </div><!--div控制模块-->
        </div>

        <script>
            function getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg);  //匹配目标参数
                if (r != null) return unescape(r[2]); return null; //返回参数值
            };
            var myModel = {courseList:[]};
            var youModel={questList:[]};
            var klassseminarid = getUrlParam("klassseminarid");

            function quest() {//每次点下个提问调用
                var htmlNav='';
                $("#isbody").empty();
                for(var j=0;j<myModel.courseList.length;j++)
                {
                    htmlNav+='<div class="well col-xs-9 display-none mydiv" id="div'+j+'" >'
                    htmlNav+='<!--展示环节-->\n' +
                        '                <div class="well">\n' +
                        '                    <div >\n' +
                        '                        <label >展示打分:</label>\n' +
                        '                    </div>\n' +
                        '                    <div class="input-group">\n' +
                        '                        <input id="pi" type="text" class="form-control" placeholder="0~5分">\n' +
                        '                        <span class="input-group-btn">\n' +
                        '                        <button class="btn btn-default " type="button" onclick="some('+j+')">\n' +
                        '                            <span class="glyphicon glyphicon-ok"></span>\n' +
                        '                        </button>\n' +
                        '                    </span>\n' +
                        '                    </div><!-- /input-group -->\n' +
                        '                </div>\n' +
                        '                <div class="well">\n' +
                        '                    <div >\n' +
                        '                        <label >提问打分:</label>\n' +
                        '                    </div>\n' +
                        '                    <div class="input-group">\n' +
                        '                        <input type="text" class="form-control" placeholder="0~5分">\n' +
                        '                        <span class="input-group-btn">\n' +
                        '                        <button class="btn btn-default" type="button">\n' +
                        '                            <span class="glyphicon glyphicon-ok"></span>\n' +
                        '                        </button>\n' +
                        '                    </span>\n' +
                        '                    </div><!-- /input-group --><br>';
                    htmlNav+='<div class="row margin-3p" id="questionlist'+j+'">';
                    $.ajax({
                        url: "/attendance/" + myModel.courseList[j].attendanceId+"/questionList",
                        type: "GET",
                        data:{klassSeminarId:klassseminarid},
                        async: false,
                        dataType: 'json',
                        success: function (res) {
                            youModel.questList=res;
                            if(youModel.questList.length>0)
                            {
                                htmlNav+='<ul class="nav nav-pills  text-center">';
                                for(var i=0;i<youModel.questList.length;i++)
                                {
                                    htmlNav+='<li role="presentation" ><a href="#">第'+youModel.questList[i].teamSerial+'组 </a></li>';
                                }
                                htmlNav+='</ul>'
                            }
                        },error:function () {
                            alert("服务超时，请重试");
                        }
                    });
                    htmlNav+='                    </div>';
                    htmlNav+='<div class="row">\n' +
                        '                        <button class="btn btn-primary btn-block">下个提问</button>\n' +
                        '                    </div>\n' +
                        '                </div>\n' +
                        '                <div class="row">\n' +
                        '                    <button class="btn btn-primary btn-block mynextGroup disabled">下组展示</button>\n' +
                        '                </div>\n' +
                        '\n' +
                        '            </div><!--div控制模块-->';
                }
                $("#isbody").html(htmlNav);

                //var seminarid = getUrlParam("seminarid");
            }
            function teampre() {
                $.ajax({
                    url: "/attendance/" + klassseminarid+"/info",
                    type: "GET",
                    async: false,
                    dataType: 'json',
                    success: function (res) {
                        myModel.courseList=res;
                        var htmlNav='';
                        $("#myView").empty();
                        if(myModel.courseList.length>0)
                        {
                            htmlNav+='<ul class="nav nav-pills nav-stacked text-center">';
                            for(var i=0;i<myModel.courseList.length;i++)
                            {
                               // alert(myModel.courseList[i].teamName);
                                htmlNav+='<li role="presentation" class="myL" id="L'+i+'"><a href="#"  >NO'+myModel.courseList[i].teamOrder+myModel.courseList[i].teamName+'</a></li>'
                            }
                            htmlNav+='</ul>'
                            $("#myView").html(htmlNav);
                        }
                    },error:function () {
                        alert("服务超时，请重试");
                    }
                });
                
            }
            teampre();
            quest();
            var num=[0,1,2,3,4,5];
            var index;
            $.each(num,function (i,val) {
                $("#L"+i).click(function () {
                    index=i;
                    $(".myL").removeClass("active");
                    $("#L"+i).addClass("active");
                    $(".mydiv").hide();
                    $("#div"+i).show();
                })
            })
            $("button.mynextGroup").click(function () {
                index++;
                if(index<6){
                    //save一下成绩
                    $(".myL").removeClass("active");
                    $("#L"+index).addClass("active");
                    $(".mydiv").hide();
                    $("#div"+index).show();
                }

            })
            $("button.nextQuestion").click(function () {
                //save一下问题成绩

            })
            function savepscore() {
                
            }
            function saveascore() {
                
            }
          
        </script>

        </div>

    </div>


</div>






</body>
</html>
